"0","# Clean up the data"
"0","coral.2013_wide <- coral_2013 %>%"
"0","  filter(!Tile_Number %in% c(21:24, 141:146, 177:180, 77:80, 19:24,41:48)) %>% "
"0","  # filter tiles that weren't surveyed"
"0","mutate_all(funs(replace_na(.,0))) %>% "
"0","  # replace NAs with zero"
"0","  mutate(Year = ""2013"") %>% "
"0","  # create a new column for year"
"0","  mutate(Depth= ifelse(Transect %in% ""upslope"", ""Shallow"", "
"0","                       ifelse(Transect %in% ""downslope"", ""Deep"", ""Middle""))) %>% "
"0","  # new column for depth"
"0","  mutate(All.corals = (All.Divots + Flat.Surface)) %>% "
"0","  # new column of all the corals"
"0","  mutate(Small.Divot=replace(Small.Divot, Tile_Number "
"0","                             %in% c(121,122,123,124), NA)) %>% "
"0","  # small vs large divots not differentiated for these tiles"
"0","  mutate(Large.Divot=replace(Large.Divot, Tile_Number "
"0","                             %in% c(121,122,123,124), NA)) %>% "
"0","  # small vs large divots not differentiated for these tiles"
"0","  dplyr::select(Date, Year, Location, Transect, Depth, "
"0","         Tile_Number:All.Divots, All.corals,Notes) %>% "
"0","  # reorder"
"0","  dplyr::rename(Original.Tile.Number = Tile_Number) %>%"
"0","  mutate(Treatment = ifelse(Treatment == ""open"", ""Uncaged"", ""Caged"")) %>%"
"0","  dplyr::select(-Transect) %>%"
"0","  dplyr::rename(Flat.surface = Flat.Surface) %>%"
"0","  dplyr::rename(Large.divot = Large.Divot) %>%"
"0","  dplyr::rename(Small.divot = Small.Divot) %>%"
"0","  dplyr::rename(All.divots = All.Divots)"
"2","Warning:"
"2"," `funs()` was deprecated in dplyr 0.8.0.
Please use a list of either functions or lambdas: 

  # Simple named list: 
  list(mean = mean, median = median)

  # Auto named with `tibble::lst()`: 
  tibble::lst(mean, median)

  # Using lambdas
  list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))
[90mThis warning is displayed once every 8 hours.[39m
[90mCall `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.[39m
"
"0","  # rename"
"0",""
"0","str(coral.2013_wide)"
"1","'data.frame':	"
"1",""
"1","152"
"1",""
"1"," obs. of  "
"1",""
"1","13"
"1",""
"1"," variable"
"1",""
"1","s"
"1",""
"1",":"
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Date                "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""8/8/13"" ""8/8/13"" ""8/8/13"" ""8/8/13"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Year                "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""2013"" ""2013"" ""2013"" ""2013"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Location            "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""FR3"" ""FR3"" ""FR3"" ""FR3"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Depth               "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""Shallow"" ""Shallow"" ""Shallow"" ""Shallow"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Original.Tile.Number"
"1",""
"1",":"
"1"," num  "
"1",""
"1","122 121 124 123 126 125 128 127 130 129"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Tile_Number_1.10    "
"1",""
"1",":"
"1"," num  "
"1",""
"1","1 1 2 2 3 3 4 4 5 5"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Treatment           "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""Uncaged"" ""Caged"" ""Uncaged"" ""Caged"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Large.divot         "
"1",""
"1",":"
"1"," num  "
"1",""
"1","NA NA NA NA 5 1 4 8 7 1"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Small.divot         "
"1",""
"1",":"
"1"," num  "
"1",""
"1","NA NA NA NA 3 1 3 18 16 6"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Flat.surface        "
"1",""
"1",":"
"1"," num  "
"1",""
"1","1 1 0 0 1 0 1 1 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","All.divots          "
"1",""
"1",":"
"1"," num  "
"1",""
"1","8 11 0 8 8 2 7 26 23 7"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","All.corals          "
"1",""
"1",":"
"1"," num  "
"1",""
"1","9 12 0 8 9 2 8 27 23 7"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Notes               "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""Did not distinquish between large and small divots"" ""Did not distinquish between large and small divots"" ""Did not distinquish between large and small divots; more recently installed"" ""Did not distinquish between large and small divots"""
"1",""
"1"," ..."
"1",""
"1","
"
"0","coral.2013_wide$Original.Tile.Number <- as.character(coral.2013_wide$Original.Tile.Number)"
"0",""
"0",""
"0","# Long Version"
"0","coral.2013_long <- coral.2013_wide %>%"
"0","  pivot_longer(-c(Date:Treatment, All.divots:Notes),"
"0","               names_to= ""Tile.Placement"", values_to= ""Corals"") %>%"
"0","  filter(Corals != ""NA"") # get rid of tiles that didn't distinguish between large and small divots"
"0",""
"0",""
"0",""
"0","# Combine data with the cleaned up metadata"
"0","str(coral.2013_long)"
"1","tibble [448 Ã— 12]"
"1",""
"1"," (S3: "
"1",""
"1","tbl_df/tbl/data.frame"
"1",""
"1",")"
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Date                "
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""8/8/13"" ""8/8/13"" ""8/8/13"" ""8/8/13"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Year                "
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""2013"" ""2013"" ""2013"" ""2013"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Location            "
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""FR3"" ""FR3"" ""FR3"" ""FR3"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Depth               "
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""Shallow"" ""Shallow"" ""Shallow"" ""Shallow"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Original.Tile.Number"
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""122"" ""121"" ""124"" ""123"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Tile_Number_1.10    "
"1",""
"1",":"
"1"," num [1:448] "
"1",""
"1","1 1 2 2 3 3 3 3 3 3"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Treatment           "
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""Uncaged"" ""Caged"" ""Uncaged"" ""Caged"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","All.divots          "
"1",""
"1",":"
"1"," num [1:448] "
"1",""
"1","8 11 0 8 8 8 8 2 2 2"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","All.corals          "
"1",""
"1",":"
"1"," num [1:448] "
"1",""
"1","9 12 0 8 9 9 9 2 2 2"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Notes               "
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""Did not distinquish between large and small divots"" ""Did not distinquish between large and small divots"" ""Did not distinquish between large and small divots; more recently installed"" ""Did not distinquish between large and small divots"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Tile.Placement      "
"1",""
"1",":"
"1"," chr [1:448] "
"1",""
"1","""Flat.surface"" ""Flat.surface"" ""Flat.surface"" ""Flat.surface"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Corals              "
"1",""
"1",":"
"1"," num [1:448] "
"1",""
"1","1 1 0 0 5 3 1 1 1 0"
"1",""
"1"," ..."
"1",""
"1","
"
"0","str(metadata)"
"1","'data.frame':	"
"1",""
"1","180"
"1",""
"1"," obs. of  "
"1",""
"1","8"
"1",""
"1"," variable"
"1",""
"1","s"
"1",""
"1",":"
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Original.Tile.Number"
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""1"" ""2"" ""3"" ""4"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","New.Tile.Number     "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""1"" ""2"" ""3"" ""4"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Tile.Number         "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""1"" ""2"" ""3"" ""4"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Site                "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""F9"" ""F9"" ""F9"" ""F9"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Depth               "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""Shallow"" ""Shallow"" ""Shallow"" ""Shallow"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Treatment           "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""Caged"" ""Uncaged"" ""Caged"" ""Uncaged"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Pair                "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""Pair 1"" ""Pair 1"" ""Pair 2"" ""Pair 2"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","New.Site            "
"1",""
"1",":"
"1"," chr  "
"1",""
"1","""FR9"" ""FR9"" ""FR9"" ""FR9"""
"1",""
"1"," ..."
"1",""
"1","
"
"0","coral.2013_long <- dplyr::inner_join(coral.2013_long, metadata, by=""Original.Tile.Number"") %>%"
"0","  dplyr::select(-Treatment.y, -Depth.y) %>%"
"0","  dplyr::rename(Treatment = Treatment.x) %>%"
"0","  dplyr::rename(Depth = Depth.x)"
"0",""
"0","coral.2013_wide <- spread(coral.2013_long, Tile.Placement, Corals) %>%"
"0","  arrange(as.numeric(Original.Tile.Number)) "
"0",""
"0",""
"0",""
"0","# Filtered dataset without the 2013 tiles that didn't record where the coral was"
"0","coral.2013.models_long <- coral.2013_wide %>% "
"0","  dplyr::select(-Notes) %>%"
"0","  filter(Large.divot != ""NA"") %>% # get rid of the 2013 tiles that didn't record where the coral was (refilter them because of new wide df)"
"0","  pivot_longer(-c(Date:New.Site),"
"0","               names_to= ""Tile.Placement"", values_to= ""Corals"") "
"0",""
"0",""
"0","# Long dataset with all divots vs flat surface (no small vs large and no edge)"
"0","coral.2013.divot.flat_long <- coral.2013_wide %>% "
"0","  dplyr::select(-Notes, -Small.divot, -Large.divot, -All.corals) %>%"
"0","  pivot_longer(-c(Date:Treatment, New.Tile.Number:New.Site),"
"0","               names_to= ""Tile.Placement"", values_to= ""Corals"") "
